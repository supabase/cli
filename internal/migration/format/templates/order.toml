[db.migrations]
schema_paths = [
  "./cluster/variables.sql",

  # 1. Cluster-level objects
  "./cluster/roles.sql",
  "./cluster/extensions.sql",
  "./cluster/foreign_data_wrappers.sql",
  "./cluster/tablespaces.sql",

  # 2. Schema definitions
  "./schemas/*/schema.sql",

  # 3. Types and sequences (before tables)
  "./schemas/*/types.sql",
  "./schemas/*/sequences.sql",

  # 4. Tables (with indexes, constraints)
  "./schemas/*/tables/*.sql",
  "./schemas/*/foreign_tables/*.sql",

  # 5. Views and materialized views (depend on tables)
  "./schemas/*/views/*.sql",
  "./schemas/*/materialized_views/*.sql",

  # 6. Functions and procedures (with triggers)
  "./schemas/*/functions/*.sql",

  # 7. Other unqualified entities
  "./schemas/*/unqualified.sql",

  # 8. Replication (depends on tables)
  "./cluster/publications.sql",
  "./cluster/subscriptions.sql",

  # 9. Event triggers (last)
  "./cluster/event_triggers.sql",
]
