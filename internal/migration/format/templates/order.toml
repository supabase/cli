[db.migrations]
schema_paths = [
  # 1. Cluster-level objects
  "./cluster/roles.sql",
  "./cluster/extensions.sql",
  "./cluster/foreign_data_wrappers.sql",

  # 2. Schema definitions
  "./schemas/*/schema.sql",

  # 3. Types and sequences (before tables)
  "./schemas/*/types.sql",
  "./schemas/*/sequences.sql",

  # 4. Tables (with indexes, constraints)
  "./schemas/*/tables/*.sql",

  # 5. Foreign tables
  "./schemas/*/foreign_tables/*.sql",

  # 6. Views and materialized views (depend on tables)
  "./schemas/*/views/*.sql",
  "./schemas/*/materialized_views/*.sql",

  # 7. Functions and procedures (scalar/table-valued only; trigger functions are with their tables/views)
  "./schemas/*/functions/*.sql",
  "./schemas/*/procedures/*.sql",

  # 8. Replication (depends on tables)
  "./cluster/publications.sql",
  "./cluster/subscriptions.sql",

  # 9. Event triggers (last)
  "./cluster/event_triggers.sql",
]
